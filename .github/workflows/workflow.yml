on:
    push:
    workflow_dispatch:

defaults:
    run:
        shell: bash

jobs:
    job:
        runs-on: macos-15
        steps:
            - name: Checkout Xcode-Mirror
              uses: actions/checkout@main
              with:
                repository: F1248/Xcode-Mirror
                token: ${{ secrets.XCODE_MIRROR_TOKEN }}
                sparse-checkout: Build.txt
                sparse-checkout-cone-mode: false

            - run: cat Build.txt

            - name: Checkout Xcode-Mirror
              uses: actions/checkout@main
              with:
                repository: F1248/Xcode-Mirror
                token: ${{ secrets.XCODE_MIRROR_TOKEN }}

            - name: Install unxip
              run: |
                curl --remote-name --location https://github.com/saagarjha/unxip/releases/latest/download/unxip
                chmod +x unxip

            - run: |
                cat Xcode.xip-* > Xcode.xip
                ./unxip Xcode.xip
                ls
                pwd
